# ACFileServer

ACFileServer は、公開/非公開の切り替えが可能なダウンロード専用のファイルサーバーです。  
エンドユーザーは公開ファイルを一覧からダウンロードでき、管理者は管理パネルから各ファイルの公開状態を変更できます。

---

## 特徴

- **ファイル一覧とダウンロード**  
  公開状態に設定されたファイルのみがエンドユーザー向けに表示され、クリックでダウンロード可能です。

---

## セットアップ

### 1. リポジトリのクローン

```bash
git clone https://github.com/k1rnt/ACFileServer
cd ACFileServer
```

### 2. .env ファイルの準備
- プロジェクトルートにある `.env.example` をコピーして `.env` を作成します。
```bash
cp .env.example .env
```

- 作成した `.env` ファイルをテキストエディタで開き、以下の項目を必要に応じて設定してください。
```dotenv
# 管理者認証情報
ADMIN_USERNAME=myadmin
ADMIN_PASSWORD=secret123

# 管理パネル URL を任意で指定（未指定の場合はアプリ起動時にランダム生成されます）
# ADMIN_ROUTE=任意の16文字
```

### 3. セットアップスクリプトの実行
初回のみ、以下のコマンドで仮想環境の構築および依存パッケージのインストールを行います。
```bash
chmod +x ./setup.sh
./setup.sh
```
このスクリプトは、仮想環境の作成、pip のアップグレード、依存関係のインストール、そして `.env.example` からの自動コピーを実施します。

---

## ファイルの配置方法
- アプリケーション起動時、`main.py` は自動的にプロジェクトルートに `files` フォルダを作成します（存在しない場合）。
- サーバーで公開/非公開の切り替え対象となるファイルは、この `files` フォルダ内に配置してください。
- 注意点:
    - フォルダ内に配置された新規ファイルは、デフォルトでは 非公開 として扱われます。
    - エンドユーザーには、管理パネルで「公開」に設定されたファイルのみが表示され、ダウンロード可能となります。

---

## 起動方法
- デフォルトポート（5000 番）で起動する場合:
```bash
venv/bin/python3 main.py
```

ポートを指定して起動する場合:
```bash
venv/bin/python3 main.py 8000
```
アプリ起動時、コンソールに管理パネルの URL（例: http://192.168.x.x:8000/<ランダムパス>）が出力されます。
